/*
 * Invoice Page
 * 
 * Date Created 5/12/2012
 * Last Update 5/12/2012
 *
 * This theme is part of themeforest.net
 * ====================================================================================================================== */
function print_today(){var d=new Date();var a=new Array("January","February","March","April","May","June","July","August","September","October","November","December");var c=((d.getDate()<10)?"0":"")+d.getDate();function e(f){return(f<1000)?f+1900:f}var b=a[d.getMonth()]+" "+c+", "+(e(d.getYear()));return b}function roundNumber(e,d){var j;d=Number(d);if(d<1){j=(Math.round(e)).toString()}else{var f=e.toString();if(f.lastIndexOf(".")==-1){f+="."}var c=f.lastIndexOf(".")+d;var b=Number(f.substring(c,c+1));var a=Number(f.substring(c+1,c+2));if(a>=5){if(b==9&&c>0){while(c>0&&(b==9||isNaN(b))){if(b!="."){c-=1;b=Number(f.substring(c,c+1))}else{c-=1}}}b+=1}if(b==10){f=f.substring(0,f.lastIndexOf("."));var k=Number(f)+1;j=k.toString()+"."}else{j=f.substring(0,c)+b.toString()}}if(j.lastIndexOf(".")==-1){j+="."}var h=(j.substring(j.lastIndexOf(".")+1)).length;for(var g=0;g<d-h;g++){j+="0"}return j}function update_total(){var a=0;$(".price").each(function(b){price=$(this).html().replace("$","");if(!isNaN(price)){a+=Number(price)}});a=roundNumber(a,2);$("#subtotal").html("$"+a);$("#total").html("$"+a);update_balance()}function update_balance(){var a=$("#total").html().replace("$","")-$("#paid").val().replace("$","");a=roundNumber(a,2);$(".due").html("$"+a)}function update_price(){var b=$(this).parents(".item-row");var a=b.find(".cost").val().replace("$","")*b.find(".qty").val();a=roundNumber(a,2);isNaN(a)?b.find(".price").html("N/A"):b.find(".price").html("$"+a);update_total()}function bind(){$(".cost").blur(update_price);$(".qty").blur(update_price)}$(document).ready(function(){$("input").click(function(){$(this).select()});$("#paid").blur(update_balance);$("#addrow").click(function(){$(".item-row:last").after('<tr class="item-row"><td class="item-name"><div class="delete-wpr"><textarea>Item Name</textarea><a class="delete" href="javascript:;" title="Remove row">x</a></div></td><td class="description"><textarea>Description</textarea></td><td><textarea class="cost">$0</textarea></td><td><textarea class="qty">0</textarea></td><td><span class="price">$0</span></td></tr>');if($(".delete").length>0){$(".delete").show()}bind()});bind();$(".delete").live("click",function(){$(this).parents(".item-row").remove();update_total();if($(".delete").length<2){$(".delete").hide()}});$("#cancel-logo").click(function(){$("#logo").removeClass("edit")});$("#delete-logo").click(function(){$("#logo").remove()});$("#change-logo").click(function(){$("#logo").addClass("edit");$("#imageloc").val($("#image").attr("src"));$("#image").select()});$("#save-logo").click(function(){$("#image").attr("src",$("#imageloc").val());$("#logo").removeClass("edit")});$("#date").val(print_today())});